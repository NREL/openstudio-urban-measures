{
	"$schema": "http://json-schema.org/draft-04/schema#",
	"description": "Comment describing your JSON Schema",
	"items": {
		"type": "object",
		"additionalProperties": false
	},
	"properties": {
		"version": {
			"description": "Current version is 0.1",
			"type": "string"
		},
		"variables": {
			"type": "array",
			"items": {
				"$ref": "#/definitions/Variable"
			}
		},
		"region": {
			"type": "object",
			"properties": {
				"name": {
					"type": "string"
				},
				"wgs_84_centroid": {
					"$ref": "#/definitions/Point"
				},
				"polygon": {
					"$ref": "#/definitions/Polygon"
				}
			},
			"additionalProperties": false
		},
		"buildings": {
			"type": "array",
			"items": {
				"$ref": "#/definitions/Building"
			}
		},
		"taxlots": {
			"type": "array",
			"items": {
				"$ref": "#/definitions/Taxlot"
			},
			"additionalProperties": false
		},
		"scenarios": {
			"type": "array",
			"items": {
				"$ref": "#/definitions/Scenario"
			}
		}
	},
	"required": [
		"buildings",
		"taxlots"
	],
	"additionalProperties": false,
	"definitions": {
		"Source": {
			"description": "Source of the number of stories data.",
			"type": "string",
			"enum": [
				"Measured",
				"Assessor",
				"Developer",
				"User Input",
				"Inferred"
			]
		},
		"SpaceType": {
			"type": "string",
			"enum": [
				"Single-Family",
				"Multifamily (2 to 4 units)",
				"Multifamily (5 or more units)",
				"Mobile Home",
				"Vacant",
				"Office",
				"Laboratory",
				"Nonrefrigerated warehouse",
				"Food sales",
				"Public order and safety",
				"Outpatient health care",
				"Refrigerated warehouse",
				"Religious worship",
				"Public assembly",
				"Education",
				"Food service",
				"Inpatient health care",
				"Nursing",
				"Lodging",
				"Strip shopping mall",
				"Enclosed mall",
				"Retail other than mall",
				"Service",
				"Other"
			]
		},
		"Footprint": {
			"type": "object",
			"properties": {
				"area": {
					"description": "Area of the footprint (m^2)",
					"type": "number"
				},
				"perimeter": {
					"description": "Perimeter of the footprint (m)",
					"type": "number"
				},
				"polygons": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/Polygon"
					}
				}
			},
			"additionalProperties": false
		},
		"Polygon": {
			"type": "object",
			"properties": {
				"coordinate_system": {
					"description": "Point x, y units depend on coordinate system.  When 'WGS 84' x=longitude, y=lattitude (deg).",
					"type": "string",
					"enum": [
						"WGS 84",
						"Local Cartesian"
					]
				},
				"points": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/Point"
					}
				},
				"holes": {
					"type": "array",
					"items": {
						"type": "object",
						"properties": {
							"points": {
								"type": "array",
								"items": {
									"$ref": "#/definitions/Point"
								}
							}
						},
						"additionalProperties": false
					}
				}
			},
			"additionalProperties": false
		},
		"Point": {
			"type": "object",
			"properties": {
				"x": {
					"type": "number"
				},
				"y": {
					"type": "number"
				}
			},
			"additionalProperties": false
		},
		"Taxlot": {
			"type": "object",
			"properties": {
				"id": {
					"description": "Unique id",
					"type": "string"
				},
				"source_id": {
					"description": "Original source id",
					"type": "string"
				},
				"zoning": {
					"type": "string",
					"enum": [
						"Residential",
						"Commercial"
					]
				},
				"polygon": {
					"$ref": "#/definitions/Footprint"
				}
			},
			"required": [
				"id"
			],
			"additionalProperties": false
		},
		"Building": {
			"type": "object",
			"properties": {
				"id": {
					"description": "Unique id",
					"type": "string"
				},
				"source_id": {
					"description": "Original source id",
					"type": "string"
				},
				"taxlot_id": {
					"description": "Taxlot id",
					"type": "string"
				},
				"building_number": {
					"description": "Number of building on taxlot if there are multiple buildings ",
					"type": "integer"
				},
				"name": {
					"description": "Building name",
					"type": "string"
				},
				"address": {
					"description": "Street address",
					"type": "string"
				},
				"status": {
					"description": "Building's status",
					"type": "string",
					"enum": [
						"Proposed",
						"Existing",
						"Demolished"
					]
				},
				"space_type": {
					"$ref": "#/definitions/SpaceType"
				},
				"space_type_source": {
					"$ref": "#/definitions/Source"
				},
				"number_of_stories": {
					"description": "The maximum number of building stories",
					"type": "integer"
				},
				"number_of_stories_source": {
					"$ref": "#/definitions/Source"
				},
				"number_of_stories_above_ground": {
					"type": "integer"
				},
				"number_of_stories_above_ground_source": {
					"$ref": "#/definitions/Source"
				},
				"number_of_stories_below_ground": {
					"type": "integer"
				},
				"number_of_stories_below_ground_source": {
					"$ref": "#/definitions/Source"
				},
				"number_of_residential_units": {
					"description": "Total number of residential units in the building. ",
					"type": "integer"
				},
				"number_of_residential_units_source": {
					"$ref": "#/definitions/Source"
				},
				"year_built": {
					"description": "The year construction of the building was completed ",
					"type": "integer"
				},
				"year_built_source": {
					"$ref": "#/definitions/Source"
				},
				"structure_type": {
					"description": "The predominant construction method used to build the structure.",
					"type": "string",
					"enum": [
						"Reinforced Masonry",
						"Unreinforced Masonry",
						"Steel Framed",
						"Wood Framed"
					]
				},
				"structure_type_source": {
					"$ref": "#/definitions/Source"
				},
				"structure_condition": {
					"description": "The general condition of the structure.",
					"type": "string",
					"enum": [
						"Safe",
						"Unsafe"
					]
				},
				"structure_condition_source": {
					"$ref": "#/definitions/Source"
				},
				"average_roof_height": {
					"description": "Average height of the roof relative to surface elevation (m)",
					"type": "number"
				},
				"average_roof_height_source": {
					"$ref": "#/definitions/Source"
				},
				"maximum_roof_height": {
					"description": "Maximum height of the roof relative to surface elevation (m)",
					"type": "number"
				},
				"maximum_roof_height_source": {
					"$ref": "#/definitions/Source"
				},
				"minimum_roof_height": {
					"description": "Minimum height of the roof relative to surface elevation (m)",
					"type": "number"
				},
				"minimum_roof_height_source": {
					"$ref": "#/definitions/Source"
				},
				"surface_elevation": {
					"description": "The surface elevation (above NAVD88 datum) of the building (m)",
					"type": "number"
				},
				"surface_elevation_source": {
					"$ref": "#/definitions/Source"
				},
				"roof_elevation": {
					"description": "The maximum roof elevation (above NAVD88 datum) of the building (m)",
					"type": "number"
				},
				"roof_elevation_source": {
					"$ref": "#/definitions/Source"
				},
				"roof_type": {
					"description": "The basic roof structure type",
					"type": "string",
					"enum": [
						"Complex",
						"Flat",
						"Multi-level Flat",
						"Pitched"
					]
				},
				"roof_type_source": {
					"$ref": "#/definitions/Source"
				},
				"floor_area": {
					"description": "Usable floor area (m^2)",
					"type": "number"
				},
				"floor_area_source": {
					"$ref": "#/definitions/Source"
				},
				"intersecting_building_ids": {
					"description": "Ids of other buildings which are in contact with this building",
					"type": "array",
					"items": {
						"type": "string",
						"items": [
							{}
						]
					}
				},
				"surrounding_building_ids": {
					"description": "Ids of other buildings which are close enough to ths building to include in shading calculations",
					"type": "array",
					"items": {
						"type": "string",
						"properties": {
							"building_id": {}
						}
					}
				},
				"footprint": {
					"$ref": "#/definitions/Footprint"
				},
				"stories": {
					"description": "Information about each story in the building",
					"type": "array",
					"items": {
						"$ref": "#/definitions/Story"
					}
				},
				"custom_models": {
					"description": "Optional list of custom models to override the footprint.  If no footprint is present then the first custom model is used as the default.",
					"type": "array",
					"items": {
						"type": "object",
						"properties": {
							"id": {
								"type": "string"
							},
							"name": {
								"type": "string"
							},
							"osm_filename": {},
							"geojson_filename": {}
						},
						"required": [
							"id",
							"name"
						],
						"additionalProperties": false
					}
				}
			},
			"required": [
				"id",
				"source_id",
				"space_type",
				"number_of_stories",
				"surface_elevation",
				"roof_elevation",
				"floor_area",
				"intersecting_building_ids",
				"surrounding_building_ids"
			],
			"additionalProperties": false
		},
		"Story": {
			"type": "object",
			"properties": {
				"name": {
					"type": "string"
				},
				"story_number": {
					"description": "First above ground floor is 1, first below ground floor is 0, second below ground floor is -1",
					"type": "integer"
				},
				"floor_to_floor_height": {
					"description": "Floor to floor height of this story (m)",
					"type": "number"
				},
				"elevation": {
					"description": "Elevation of the story floor (m)",
					"type": "number"
				},
				"window_to_wall_ratio": {
					"type": "number",
					"minimum": 0,
					"maximum": 1,
					"exclusiveMaximum": true
				},
				"space_type": {
					"$ref": "#/definitions/SpaceType"
				},
				"footprint": {
					"$ref": "#/definitions/Footprint"
				}
			},
			"additionalProperties": false
		},
		"Variable": {
			"type": "object",
			"properties": {
				"id": {
					"type": "string"
				},
				"name": {
					"type": "string"
				},
				"values": {
					"type": "array",
					"minItems": 1,
					"items": {
						"type": "string"
					}
				}
			},
			"required": [
				"id",
				"name",
				"values"
			],
			"additionalProperties": false
		},
		"Scenario": {
			"type": "object",
			"properties": {
				"id": {
					"description": "ID for this scenario",
					"type": "string"
				},
				"name": {
					"description": "Name of this scenario",
					"type": "string"
				},
				"variable_values": {
					"description": "Variable values that are applied to all buildings in this scenario unless overridden at the building level",
					"type": "array",
					"minItems": 1,
					"items": [
						{
							"type": "object",
							"properties": {
								"variable_id": {
									"type": "string"
								},
								"variable_value": {
									"type": "string"
								}
							},
							"required": [
								"variable_id",
								"variable_value"
							],
							"additionalProperties": false
						}
					],
					"additionalItems": false
				},
				"buildings": {
					"description": "Specify variable values at the building level, overrides global variable values for particular buildings",
					"type": "array",
					"items": [
						{
							"type": "object",
							"properties": {
								"building_id": {
									"type": "string"
								},
								"variable_values": {
									"description": "Variable values that are applied to all buildings in this scenario unless overridden at the building level",
									"type": "array",
									"items": [
										{
											"type": "object",
											"properties": {
												"variable_id": {
													"type": "string"
												},
												"variable_value": {
													"type": "string"
												}
											},
											"additionalProperties": false
										}
									],
									"additionalItems": false
								},
								"custom_model_id": {
									"description": "Swaps out the model based on footprint for a custom model.  Analysis workflow decides at what stage in workflow the model substitution measure runs.",
									"type": "string"
								}
							},
							"additionalProperties": false
						}
					],
					"additionalItems": false
				},
				"district_systems": {
					"type": "array",
					"items": {
						"type": "object",
						"items": [
							{}
						],
						"properties": {
							"id": {
								"type": "string"
							},
							"name": {
								"type": "string"
							},
							"type": {
								"type": "string"
							},
							"building_ids": {
								"type": "array",
								"items": {
									"type": "string"
								}
							}
						},
						"additionalProperties": false
					}
				}
			},
			"required": [
				"id",
				"name",
				"variable_values"
			],
			"additionalProperties": false
		}
	}
}