{
	"$schema": "http://json-schema.org/draft-04/schema#",
	"id": "http://json-schema.org/geojson/geojson.json#",
	"title": "Geo JSON object",
	"description": "Schema for a Geo JSON object",
	"type": "object",
	"properties": {
		"crs": {
			"$ref": "#/definitions/crs"
		},
		"bbox": {
			"$ref": "#/definitions/bbox"
		}
	},
	"required": [
		"type"
	],
	"oneOf": [
		{
			"$ref": "#/definitions/bbox"
		},
		{
			"$ref": "#/definitions/geometryCollection"
		},
		{
			"$ref": "#/definitions/feature"
		},
		{
			"$ref": "#/definitions/featureCollection"
		}
	],
	"definitions": {
		"source": {
			"description": "Data source",
			"type": "string",
			"enum": [
				"Measured",
				"Assessor",
				"Developer",
				"User Input",
				"Inferred"
			]
		},
		"spaceType": {
			"description": "Overall building space type.",
			"type": "string",
			"enum": [
				"Single-Family",
				"Multifamily (2 to 4 units)",
				"Multifamily (5 or more units)",
				"Mobile Home",
				"Vacant",
				"Office",
				"Laboratory",
				"Nonrefrigerated warehouse",
				"Food sales",
				"Public order and safety",
				"Outpatient health care",
				"Refrigerated warehouse",
				"Religious worship",
				"Public assembly",
				"Education",
				"Food service",
				"Inpatient health care",
				"Nursing",
				"Lodging",
				"Strip shopping mall",
				"Enclosed mall",
				"Retail other than mall",
				"Service",
				"Other"
			]
		},
		"story": {
			"type": "object",
			"properties": {
				"name": {
					"type": "string"
				},
				"story_number": {
					"description": "First above ground floor is story 1, first below ground floor is 0, second below ground floor is -1",
					"type": "integer"
				},
				"floor_to_floor_height": {
					"description": "Floor to floor height of this story (m)",
					"type": "number"
				},
				"elevation": {
					"description": "Elevation of the story floor (m)",
					"type": "number"
				},
				"window_to_wall_ratio": {
					"description": "Ratio of exterior window area to exterior wall area.",
					"type": "number",
					"minimum": 0,
					"maximum": 1,
					"exclusiveMaximum": true
				},
				"space_type": {
					"$ref": "#/definitions/spaceType"
				}
			},
			"additionalProperties": false
		},
		"position": {
			"description": "A single position",
			"type": "array",
			"minItems": 2,
			"items": [
				{
					"type": "number"
				},
				{
					"type": "number"
				},
				{
					"type": "number"
				}
			],
			"additionalItems": false
		},
		"positionArray": {
			"description": "An array of positions",
			"type": "array",
			"items": {
				"$ref": "#/definitions/position"
			}
		},
		"lineString": {
			"description": "An array of two or more positions",
			"allOf": [
				{
					"$ref": "#/definitions/positionArray"
				},
				{
					"minItems": 2
				}
			]
		},
		"linearRing": {
			"description": "An array of four positions where the first equals the last",
			"allOf": [
				{
					"$ref": "#/definitions/positionArray"
				},
				{
					"minItems": 4
				}
			]
		},
		"polygon": {
			"description": "An array of linear rings",
			"type": "array",
			"items": {
				"$ref": "#/definitions/linearRing"
			}
		},
		"geometry": {
			"title": "geometry",
			"description": "One geometry as defined by GeoJSON",
			"type": "object",
			"required": [
				"coordinates",
				"type"
			],
			"oneOf": [
				{
					"title": "Point",
					"properties": {
						"type": {
							"enum": [
								"Point"
							]
						},
						"coordinates": {
							"$ref": "#/definitions/position"
						}
					}
				},
				{
					"title": "MultiPoint",
					"properties": {
						"type": {
							"enum": [
								"MultiPoint"
							]
						},
						"coordinates": {
							"$ref": "#/definitions/positionArray"
						}
					}
				},
				{
					"title": "LineString",
					"properties": {
						"type": {
							"enum": [
								"LineString"
							]
						},
						"coordinates": {
							"$ref": "#/definitions/lineString"
						}
					}
				},
				{
					"title": "MultiLineString",
					"properties": {
						"type": {
							"enum": [
								"MultiLineString"
							]
						},
						"coordinates": {
							"type": "array",
							"items": {
								"$ref": "#/definitions/lineString"
							}
						}
					}
				},
				{
					"title": "Polygon",
					"properties": {
						"type": {
							"enum": [
								"Polygon"
							]
						},
						"coordinates": {
							"$ref": "#/definitions/polygon"
						}
					}
				},
				{
					"title": "MultiPolygon",
					"properties": {
						"type": {
							"enum": [
								"MultiPolygon"
							]
						},
						"coordinates": {
							"type": "array",
							"items": {
								"$ref": "#/definitions/polygon"
							}
						}
					}
				}
			]
		},
		"linkedObject": {
			"type": "object",
			"properties": {
				"href": {
					"type": "string",
					"format": "uri",
					"FIXME": "spec says \"dereferenceable\", cannot enforce that"
				},
				"type": {
					"description": "Suggested values: proj4, ogjwkt, esriwkt",
					"type": "string"
				}
			},
			"required": [
				"href"
			]
		},
		"linkedCrs": {
			"properties": {
				"type": {
					"enum": [
						"link"
					]
				},
				"properties": {
					"$ref": "#/definitions/linkedObject"
				}
			}
		},
		"namedCrs": {
			"properties": {
				"type": {
					"enum": [
						"name"
					]
				},
				"properties": {
					"properties": {
						"name": {
							"type": "string",
							"FIXME": "semantic validation necessary"
						}
					},
					"required": [
						"name"
					],
					"additionalProperties": false
				}
			}
		},
		"crs": {
			"title": "crs",
			"description": "a Coordinate Reference System object",
			"type": [
				"object",
				"null"
			],
			"properties": {
				"type": {
					"type": "string"
				},
				"properties": {
					"type": "object"
				}
			},
			"required": [
				"type",
				"properties"
			],
			"additionalProperties": false,
			"oneOf": [
				{
					"$ref": "#/definitions/namedCrs"
				},
				{
					"$ref": "#/definitions/linkedCrs"
				}
			]
		},
		"bbox": {
			"description": "A bounding box as defined by GeoJSON",
			"type": "array",
			"items": {
				"type": "number"
			},
			"FIXME": "unenforceable constraint: even number of elements in array"
		},
		"geometryCollection": {
			"title": "GeometryCollection",
			"description": "A collection of geometry objects",
			"properties": {
				"type": {
					"enum": [
						"GeometryCollection"
					]
				},
				"geometries": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/geometry"
					}
				}
			},
			"required": [
				"geometries"
			]
		},
		"feature": {
			"title": "Feature",
			"description": "A Geo JSON feature object",
			"properties": {
				"type": {
					"enum": [
						"Feature"
					]
				},
				"geometry": {
					"oneOf": [
						{
							"type": "null"
						},
						{
							"$ref": "#/definitions/geometry"
						}
					]
				},
				"properties": {
					"type": "object",
					"properties": {
						"feature_type": {
							"description": "Type of structure that this feature represents. ",
							"type": "string",
							"enum": [
								"Building",
								"Taxlot",
								"Other"
							]
						},
						"id": {
							"description": "Id used to refer to this feature within this dataset. Id is unique at the region level.  This id is equal to the id at the feature level to make queries easier.",
							"type": "number"
						},
						"source_id": {
							"description": "Original id in the source dataset, not used to link objects in this dataset.",
							"type": [
								"string",
								"number"
							]
						},
						"state": {
							"description": "Two character code for state containing this feature.",
							"type": "string"
						},
						"region": {
							"description": "Typically a county or city which provides a consistent level of information for all features.",
							"type": [
								"string",
								"number"
							]
						},
						"subregion_id": {
							"description": "A region is divided into multiple subregions.  ",
							"type": "number"
						},
						"name": {
							"description": "Feature name",
							"type": "string"
						},
						"legal_name": {
							"description": "Legal name used to identify this feature.",
							"type": "string"
						},
						"address": {
							"description": "Street address",
							"type": "string"
						},
						"footprint_area": {
							"description": "Area of the footprint (m^2)",
							"type": "number"
						},
						"footprint_area_source": {
							"$ref": "#/definitions/source"
						},
						"footprint_perimeter": {
							"description": "Perimeter of the footprint (m)",
							"type": "number"
						},
						"footprint_perimeter_source": {
							"$ref": "#/definitions/source"
						},
						"zoning": {
							"type": "string",
							"enum": [
								"Vacant",
								"Mixed",
								"Residential",
								"Commercial",
								"OpenSpace"
							]
						},
						"zoning_source": {
							"$ref": "#/definitions/source"
						},
						"building_properties": {
							"description": "Not a real property, just a section divider.  Properties below this are for buildings.",
							"type": "null"
						},
						"taxlot_id": {
							"description": "Id of the taxlot that this building is located on.",
							"type": "string"
						},
						"building_number": {
							"description": "Index of building on taxlot if there are multiple buildings on taxlot. ",
							"type": "integer"
						},
						"building_status": {
							"description": "Building status",
							"type": "string",
							"enum": [
								"Proposed",
								"Existing",
								"Demolished"
							]
						},
						"building_status_source": {
							"$ref": "#/definitions/source"
						},
						"space_type": {
							"$ref": "#/definitions/spaceType"
						},
						"space_type_source": {
							"$ref": "#/definitions/source"
						},
						"number_of_stories": {
							"description": "The maximum number of building stories",
							"type": "integer"
						},
						"number_of_stories_source": {
							"$ref": "#/definitions/source"
						},
						"number_of_stories_above_ground": {
							"description": "The maximum number of building stories above ground",
							"type": "integer"
						},
						"number_of_stories_above_ground_source": {
							"$ref": "#/definitions/source"
						},
						"number_of_stories_below_ground": {
							"description": "The maximum number of building stories below ground",
							"type": "integer"
						},
						"number_of_stories_below_ground_source": {
							"$ref": "#/definitions/source"
						},
						"number_of_residential_units": {
							"description": "Total number of residential units in the building. ",
							"type": "integer"
						},
						"number_of_residential_units_source": {
							"$ref": "#/definitions/source"
						},
						"year_built": {
							"description": "The year construction of the building was completed ",
							"type": "integer"
						},
						"year_built_source": {
							"$ref": "#/definitions/source"
						},
						"structure_type": {
							"description": "The predominant construction method used to build the structure.",
							"type": "string",
							"enum": [
								"Reinforced Masonry",
								"Unreinforced Masonry",
								"Steel Framed",
								"Wood Framed"
							]
						},
						"structure_type_source": {
							"$ref": "#/definitions/source"
						},
						"structure_condition": {
							"description": "The general condition of the structure.",
							"type": "string",
							"enum": [
								"Safe",
								"Unsafe"
							]
						},
						"structure_condition_source": {
							"$ref": "#/definitions/source"
						},
						"average_roof_height": {
							"description": "Average height of the roof relative to surface elevation (m)",
							"type": "number"
						},
						"average_roof_height_source": {
							"$ref": "#/definitions/source"
						},
						"maximum_roof_height": {
							"description": "Maximum height of the roof relative to surface elevation (m)",
							"type": "number"
						},
						"maximum_roof_height_source": {
							"$ref": "#/definitions/source"
						},
						"minimum_roof_height": {
							"description": "Minimum height of the roof relative to surface elevation (m)",
							"type": "number"
						},
						"minimum_roof_height_source": {
							"$ref": "#/definitions/source"
						},
						"surface_elevation": {
							"description": "The surface elevation (above NAVD88 datum) of the building (m)",
							"type": "number"
						},
						"surface_elevation_source": {
							"$ref": "#/definitions/source"
						},
						"roof_elevation": {
							"description": "The maximum roof elevation (above NAVD88 datum) of the building (m)",
							"type": "number"
						},
						"roof_elevation_source": {
							"$ref": "#/definitions/source"
						},
						"roof_type": {
							"description": "The basic roof structure type",
							"type": "string",
							"enum": [
								"Complex",
								"Flat",
								"Multi-level Flat",
								"Pitched"
							]
						},
						"roof_type_source": {
							"$ref": "#/definitions/source"
						},
						"floor_area": {
							"description": "Usable floor area (m^2)",
							"type": "number"
						},
						"floor_area_source": {
							"$ref": "#/definitions/source"
						},
						"window_to_wall_ratio": {
							"description": "Ratio of exterior window area to exterior wall area.",
							"type": "number",
							"minimum": 0,
							"maximum": 1,
							"exclusiveMaximum": true
						},
						"window_to_wall_ratio_source": {
							"$ref": "#/definitions/source"
						},
						"intersecting_building_ids": {
							"description": "Ids of other buildings which are in contact with this building",
							"type": "array",
							"items": {
								"type": "string",
								"items": [
									{}
								]
							}
						},
						"surrounding_building_ids": {
							"description": "Ids of other buildings which are close enough to ths building to include in shading calculations",
							"type": "array",
							"items": {
								"type": "string",
								"properties": {
									"building_id": {}
								}
							}
						},
						"stories": {
							"description": "Information about each story in the building",
							"type": "array",
							"items": {
								"$ref": "#/definitions/story"
							}
						},
						"measured_euis": {
							"type": "array",
							"items": {
								"type": "object",
								"properties": {
									"fuel_type": {
										"type": "string",
										"enum": [
											"Electricity",
											"Gas",
											"Combined"
										]
									},
									"begin_date": {},
									"end_date": {},
									"eui": {
										"type": "number"
									}
								}
							}
						},
						"taxlot_properties": {
							"description": "Not a real property, just a section divider.  Properties below this are for taxlots",
							"type": "null"
						},
						"building_ids": {
							"description": "Ids of buildings on this taxlot.",
							"type": "array",
							"items": {
								"type": "string"
							}
						},
						"results": {
							"type": "array"
						}
					},
					"additionalProperties": false
				},
				"id": {
					"FIXME": "may be there, type not known (string? number?)"
				}
			},
			"required": [
				"geometry",
				"properties"
			]
		},
		"featureCollection": {
			"title": "FeatureCollection",
			"description": "A Geo JSON feature collection",
			"properties": {
				"type": {
					"enum": [
						"FeatureCollection"
					]
				},
				"features": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/feature"
					}
				}
			},
			"required": [
				"features"
			]
		}
	}
}