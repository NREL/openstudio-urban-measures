{
	"$schema": "http://json-schema.org/draft-04/schema#",
	"id": "http://json-schema.org/openstudio-urban-modeling/building_properties.json#",
	"title": "Building object",
	"description": "Schema for a Building object",
	"type": "object",
	"properties": {
		"id": {
			"FIXME": "may be there, type not known (string? number?)",
			"description": "Unique id used to refer to this feature within this dataset, generated by database.",
			"type": "string"
		},
		"created_at": {
			"description": "Generated by database, YYYY-MM-DDTHH:MM:SS.SSSZ",
			"type": "string"
		},
		"updated_at": {
			"description": "Generated by database, YYYY-MM-DDTHH:MM:SS.SSSZ",
			"type": "string"
		},
		"region_ids": {
			"description": "Id of the regions containing this feature, managed by the database.",
			"type": "array"
		},
		"taxlot_id": {
			"description": "Id of the taxlot that this feature is located on, managed by the database.",
			"type": "string"
		},
		"geojson_id": {
			"description": "Id of the geojson for this feature, managed by the database.",
			"type": "string"
		},
		"analysis_ids": {
			"description": "Ids of analyses associated with this feature, managed by the database.",
			"type": "array",
			"items": {
				"type": "string"
			}
		},
		"current_datapoint_id": {
			"description": "Id of the datapoint representing current state of this building, managed by the database.",
			"type": "string"
		},
		"source_name": {
			"description": "Name of the original data source.",
			"type": "string"
		},
		"source_id": {
			"description": "Id of the feature in original data source.",
			"type": "string"
		},
		"intersecting_building_source_ids": {
			"description": "Id of interescting buildings, assumes source_name is the same.",
			"type": "array"
		},
		"taxlot_source_name": {
			"description": "Name of the original taxlot data source.",
			"type": "string"
		},
		"taxlot_source_id": {
			"description": "Source id of the taxlot this feature is located on.",
			"type": "string"
		},
		"region_source_name": {
			"description": "Name of the original taxlot data source.",
			"type": "string"
		},
		"region_source_ids": {
			"description": "Source id of the regions this feature is located in. ",
			"type": "array"
		},
		"name": {
			"description": "Feature name",
			"type": "string"
		},
		"legal_name": {
			"description": "Legal name used to identify this feature.",
			"type": "string"
		},
		"address": {
			"description": "Street address",
			"type": "string"
		},
		"census_tract": {
			"description": "Four to six digit census tract id.",
			"type": "string"
		},
		"census_block_group": {
			"description": "Census block group within the census tract.",
			"type": "string"
		},
		"census_block": {
			"description": "Census block within the census block group.",
			"type": "string"
		},
		"footprint_area": {
			"description": "Area of the footprint (m^2)",
			"type": "number"
		},
		"footprint_area_source": {
			"$ref": "#/definitions/source"
		},
		"footprint_perimeter": {
			"description": "Perimeter of the footprint (m)",
			"type": "number"
		},
		"footprint_perimeter_source": {
			"$ref": "#/definitions/source"
		},
		"zoning": {
			"type": "string",
			"enum": [
				"Vacant",
				"Mixed",
				"Residential",
				"Commercial",
				"OpenSpace"
			]
		},
		"zoning_source": {
			"$ref": "#/definitions/source"
		},
		"building_taxlot_index": {
			"description": "Index of building on taxlot if there are multiple buildings on taxlot. ",
			"type": "integer"
		},
		"building_status": {
			"description": "Building status",
			"type": "string",
			"enum": [
				"Proposed",
				"Existing",
				"Demolished"
			]
		},
		"building_status_source": {
			"$ref": "#/definitions/source"
		},
		"space_type": {
			"$ref": "#/definitions/spaceType"
		},
		"space_type_source": {
			"$ref": "#/definitions/source"
		},
		"number_of_stories": {
			"description": "The maximum number of building stories",
			"type": "integer"
		},
		"number_of_stories_source": {
			"$ref": "#/definitions/source"
		},
		"number_of_stories_above_ground": {
			"description": "The maximum number of building stories above ground",
			"type": "integer"
		},
		"number_of_stories_above_ground_source": {
			"$ref": "#/definitions/source"
		},
		"number_of_stories_below_ground": {
			"description": "The maximum number of building stories below ground",
			"type": "integer"
		},
		"number_of_stories_below_ground_source": {
			"$ref": "#/definitions/source"
		},
		"number_of_residential_units": {
			"description": "Total number of residential units in the building. ",
			"type": "integer"
		},
		"number_of_residential_units_source": {
			"$ref": "#/definitions/source"
		},
		"year_built": {
			"description": "The year construction of the building was completed ",
			"type": "integer"
		},
		"year_built_source": {
			"$ref": "#/definitions/source"
		},
		"structure_type": {
			"description": "The predominant construction method used to build the structure.",
			"type": "string",
			"enum": [
				"Reinforced Masonry",
				"Unreinforced Masonry",
				"Steel Framed",
				"Wood Framed"
			]
		},
		"structure_type_source": {
			"$ref": "#/definitions/source"
		},
		"structure_condition": {
			"description": "The general condition of the structure.",
			"type": "string",
			"enum": [
				"Safe",
				"Unsafe"
			]
		},
		"structure_condition_source": {
			"$ref": "#/definitions/source"
		},
		"average_roof_height": {
			"description": "Average height of the roof relative to surface elevation (m)",
			"type": "number"
		},
		"average_roof_height_source": {
			"$ref": "#/definitions/source"
		},
		"maximum_roof_height": {
			"description": "Maximum height of the roof relative to surface elevation (m)",
			"type": "number"
		},
		"maximum_roof_height_source": {
			"$ref": "#/definitions/source"
		},
		"minimum_roof_height": {
			"description": "Minimum height of the roof relative to surface elevation (m)",
			"type": "number"
		},
		"minimum_roof_height_source": {
			"$ref": "#/definitions/source"
		},
		"surface_elevation": {
			"description": "The surface elevation (above NAVD88 datum) of the building (m)",
			"type": "number"
		},
		"surface_elevation_source": {
			"$ref": "#/definitions/source"
		},
		"roof_elevation": {
			"description": "The maximum roof elevation (above NAVD88 datum) of the building (m)",
			"type": "number"
		},
		"roof_elevation_source": {
			"$ref": "#/definitions/source"
		},
		"roof_type": {
			"description": "The basic roof structure type",
			"type": "string",
			"enum": [
				"Complex",
				"Flat",
				"Multi-level Flat",
				"Pitched"
			]
		},
		"roof_type_source": {
			"$ref": "#/definitions/source"
		},
		"floor_area": {
			"description": "Usable floor area (m^2)",
			"type": "number"
		},
		"floor_area_source": {
			"$ref": "#/definitions/source"
		},
		"window_to_wall_ratio": {
			"description": "Ratio of exterior window area to exterior wall area.",
			"type": "number",
			"minimum": 0,
			"maximum": 1,
			"exclusiveMaximum": true
		},
		"window_to_wall_ratio_source": {
			"$ref": "#/definitions/source"
		},
		"maximum_occupancy": {
			"type": "number"
		},
		"maximum_occupancy_source": {
			"$ref": "#/definitions/source"
		},
		"stories": {
			"description": "Information about each story in the building",
			"type": "array",
			"items": {
				"$ref": "#/definitions/story"
			}
		},
		"measured_energy_use": {
			"description": "Historical measured energy use for this building.",
			"type": "array",
			"items": {
				"type": "object",
				"properties": {
					"fuel_type": {
						"type": "string",
						"enum": [
							"Electricity",
							"Gas",
							"Combined"
						]
					},
					"begin_date": {
						"description": "YYYY-MM-DD",
						"type": "string"
					},
					"end_date": {
						"description": "YYYY-MM-DD",
						"type": "string"
					},
					"value": {
						"description": "Measured energy use (GJ).",
						"type": "number"
					}
				}
			}
		}
	},
	"required": [
		"source_name",
		"source_id",
		"intersecting_building_source_ids",
		"region_source_name",
		"region_source_ids"
	],
	"definitions": {
		"source": {
			"description": "Data source",
			"type": "string",
			"enum": [
				"Measured",
				"Assessor",
				"Developer",
				"User Input",
				"Inferred"
			]
		},
		"spaceType": {
			"description": "Overall building space type.",
			"type": "string",
			"enum": [
				"Single-Family",
				"Multifamily (2 to 4 units)",
				"Multifamily (5 or more units)",
				"Mobile Home",
				"Vacant",
				"Office",
				"Laboratory",
				"Nonrefrigerated warehouse",
				"Food sales",
				"Public order and safety",
				"Outpatient health care",
				"Refrigerated warehouse",
				"Religious worship",
				"Public assembly",
				"Education",
				"Food service",
				"Inpatient health care",
				"Nursing",
				"Lodging",
				"Strip shopping mall",
				"Enclosed mall",
				"Retail other than mall",
				"Service",
				"Other"
			]
		},
		"story": {
			"type": "object",
			"properties": {
				"name": {
					"type": "string"
				},
				"story_number": {
					"description": "First above ground floor is story 1, first below ground floor is 0, second below ground floor is -1",
					"type": "integer"
				},
				"floor_to_floor_height": {
					"description": "Floor to floor height of this story (m)",
					"type": "number"
				},
				"elevation": {
					"description": "Elevation of the story floor (m)",
					"type": "number"
				},
				"window_to_wall_ratio": {
					"description": "Ratio of exterior window area to exterior wall area.",
					"type": "number",
					"minimum": 0,
					"maximum": 1,
					"exclusiveMaximum": true
				},
				"space_type": {
					"$ref": "#/definitions/spaceType"
				}
			},
			"additionalProperties": false
		}
	}
}