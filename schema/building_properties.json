{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "http://json-schema.org/openstudio-urban-modeling/building_properties.json#",
  "title": "Building object",
  "description": "Schema for a Building object",
  "type": "object",
  "properties": {
    "id": {
      "FIXME": "may be there, type not known (string? number?)",
      "description": "Unique id used to refer to this feature within this dataset, generated by database.",
      "type": "string"
    },
    "project_id": {
      "description": "Project which this feature belongs to, managed by the database.",
      "type": "string"
    },
    "created_at": {
      "description": "Generated by database, YYYY-MM-DDTHH:MM:SS.SSSZ",
      "type": "string"
    },
    "updated_at": {
      "description": "Generated by database, YYYY-MM-DDTHH:MM:SS.SSSZ",
      "type": "string"
    },
    "taxlot_id": {
      "description": "Id of the taxlot that this feature is located on, managed by the database.",
      "type": "string"
    },
    "geojson_id": {
      "description": "Id of the geojson for this feature, managed by the database.",
      "type": "string"
    },
    "type": {
      "description": "Type of feature.",
      "type": "string",
      "enum": [
        "Building",
        "Taxlot",
        "Region",
        "District System"
      ]
    },
    "source_name": {
      "description": "Name of the original data source.",
      "type": "string"
    },
    "source_id": {
      "description": "Id of the feature in original data source.",
      "type": "string"
    },
    "taxlot_source_name": {
      "description": "Name of the original taxlot data source. Used to match with existing taxlot on upload.",
      "type": "string"
    },
    "taxlot_source_id": {
      "description": "Source id of the taxlot this feature is located on. Used to match with existing taxlot on upload.",
      "type": "string"
    },
    "taxlot_index": {
      "description": "Index of building on taxlot if there are multiple buildings on taxlot. ",
      "type": "integer"
    },
    "name": {
      "description": "Feature name. Informational only.",
      "type": "string"
    },
    "legal_name": {
      "description": "Legal name used to identify this feature. Informational only.",
      "type": "string"
    },
    "address": {
      "description": "Street address. Informational only.",
      "type": "string"
    },
    "building_status": {
      "description": "Building status. Informational only.",
      "type": "string",
      "enum": [
        "Proposed",
        "Existing"
      ]
    },
    "include_in_energy_analysis": {
      "description": "Include this building's energy use and cost in the analysis. Defaults to true. Fixed parameter.",
      "type": "boolean"
    },
    "weather_filename": {
      "description": "Name of the EPW weather file for this building.  Defaults to site's weather_filename. Fixed parameter.",
      "type": "string"
    },
    "tariff_filename": {
      "description": "Name of the IDF tariff file for this building.  Defaults to site's tariff_filename.  Fixed parameter. ",
      "type": "string"
    },
    "surface_elevation": {
      "description": "The surface elevation (above NAVD88 datum) of the building (m).  This is the elevation of the ground at the building location, any below ground stories will be lower than this. Defaults to site's surface_elevation.  Fixed parameter.",
      "type": "number"
    },
    "floor_area": {
      "description": "Usable floor area (m^2). Fixed parameter.",
      "type": "number"
    },
    "space_type": {
      "$ref": "#/definitions/spaceType"
    },
    "mixed_types": {
      "description": "Only used when space_type = \"Mixed use\".  Fixed parameter.",
      "type": "array",
      "items": {
        "$ref": "#/definitions/mixedType"
      }
    },
    "number_of_stories": {
      "description": "The maximum number of building stories, sum of number of above and below ground stories. Fixed parameter.",
      "type": "integer"
    },
    "number_of_stories_above_ground": {
      "description": "The number of building stories above ground. Defaults to number_of_stories.  Fixed parameter.",
      "type": "integer"
    },
    "number_of_residential_units": {
      "description": "Total number of residential units in the building. Required for residential buildings or mixed-use buildings with residential use types. Fixed parameter.",
      "type": "integer"
    },
    "roof_type": {
      "description": "The basic roof geometry. Defaults to flat.  Fixed parameter.",
      "type": "string",
      "enum": [
        "Flat",
        "Gable",
        "Hip"
      ]
    },
    "year_built": {
      "description": "The year construction of the building was completed. Defaults to current year. Fixed parameter. ",
      "type": "integer"
    },
    "footprint_area": {
      "description": "Area of the footprint (m^2).  Calculated on export.",
      "type": "number"
    },
    "footprint_perimeter": {
      "description": "Perimeter of the footprint (m). Calculated on export.",
      "type": "number"
    }
  },
  "required": [
    "type",
    "floor_area",
    "space_type",
    "number_of_stories"
  ],
  "definitions": {
    "spaceType": {
      "description": "Overall building space type. Fixed parameter.",
      "type": "string",
      "enum": [
        "Single-Family",
        "Multifamily (2 to 4 units)",
        "Multifamily (5 or more units)",
        "Mobile Home",
        "Vacant",
        "Office",
        "Laboratory",
        "Nonrefrigerated warehouse",
        "Food sales",
        "Public order and safety",
        "Outpatient health care",
        "Refrigerated warehouse",
        "Religious worship",
        "Public assembly",
        "Education",
        "Food service",
        "Inpatient health care",
        "Nursing",
        "Lodging",
        "Strip shopping mall",
        "Enclosed mall",
        "Retail other than mall",
        "Service",
        "Mixed use"
      ]
    },
    "mixedType": {
      "type": "object",
      "properties": {
        "percent_floor_area": {
          "type": "number"
        },
        "space_type": {
          "$ref": "#/definitions/spaceType"
        }
      },
      "required": [
        "percent_floor_area",
        "space_type"
      ],
      "additionalProperties": false
    },
    "cost": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "value": {
          "type": "number"
        },
        "type": {
          "type": "string",
          "enum": [
            "Fixed cost",
            "Cost per floor area",
            "Cost per wall area",
            "Cost per window area",
            "Cost per roof area",
            "Cost per heating kW",
            "Cost per cooling kW",
            "Cost per photovoltaic kW"
          ]
        }
      },
      "required": [
        "name",
        "value",
        "type"
      ],
      "additionalProperties": false
    }
  }
}