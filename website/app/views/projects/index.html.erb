<h2>Projects</h2>

<table class="tablesorter table table-striped">
  <thead>
  <tr>
    <th>Name</th>
    <th>ID</th>
    <th>Features</th>
    <th>Workflows</th>
    <th>Datapoints</th>
    <th>Date<br>Created</th>
    <th>Last<br>Edited</th>
    <th>User</th>
    <% if can? :update, Project %><th>Actions</th><% end %>

  </tr>
  </thead>
  <tbody>
  <% @projects.each do |p| %>
    <tr>
      <td><%= link_to p.name, p %></td>
      <td><%= p.id %></td>
      <td><%= p.features.count %></td>
      <td><%= p.workflows.count %></td>
      <td><%= p.datapoints.count %></td>
      <td><%= p.created_at.strftime('%_m/%-d/%Y') %></td>
      <td><%= p.updated_at.strftime('%_m/%-d/%Y') %></td>
      <td><%= p.user.email %></td>
      <% if can? :update, Project %><td><%= link_to 'Edit', edit_project_path(p) %> | <%= link_to 'Destroy', p, method: :delete, data: { confirm: 'Are you sure?' } %></td><% end %>
    </tr>
  <% end %>
  </tbody>
</table>

<%= paginate @projects %>

<% if can? :update, Project %><%= link_to 'New Project', new_project_path, class: "btn btn-primary" %><% end %>
