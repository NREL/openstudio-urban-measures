<h2>Search Options</h2>

<%= bootstrap_form_tag url: '/api/search', layout: :horizontal, control_col: 'col-sm-4' do |f| %>
	<h3>Proximity Search</h3>
  <p>Find all items near a building.</p>
  <fieldset>
  	<%= f.text_field :bldg_fid, value: @bldg_fid, label: 'Building FID' %>
  </fieldset>
  <fieldset>
  	<%= f.text_field :distance, value: @distance, append: 'ft', label: 'Max Distance' %>
  </fieldset>
  <fieldset>
    <%= f.select :prox_type, options_for_select(@possible_types, @prox_types), { label: 'Item type to return' }, { multiple: true, size: 5 } %>
  </fieldset>
  <%= f.form_group do %>
  	<%= f.primary 'Proximity Search' %>
  <% end %>

  
	<h3>Region Search</h3>
  <p>Find all items within a specified region.</p>
  <fieldset>
  	<%= f.text_field :region_id, value: @region_id, label: 'Region ID' %>
  </fieldset>
  <fieldset>
    <%= f.select :region_type, options_for_select(@possible_types, @region_types), { label: 'Item type to return' }, { multiple: true, size: 5 } %>
  </fieldset>
  <%= f.form_group do %>
  	<%= f.primary 'Region Search' %>
  <% end %>
<% end %>

<% unless @results.nil? %>
	<h2>Search Results (<%= @results.count %>)</h2>

	<table class="tablesorter table table-striped">
	  <thead>
	  <tr>
	    <th>ID</th>
	    <th>Type</th>
	    <th>Bldg fid</th>
	    <th>Lot fid</th>

	  </tr>
	  </thead>
	  <tbody>
	  <% @results.each do |object| %>
	    <tr>
	      <td><%= link_to object.id, object %></td>
	      <td><%= object.type %></td>
	      <td><% if object.has_attribute?(:bldg_fid) %><%= object.bldg_fid %><% end %></td>
	      <td><% if object.has_attribute?(:lot_fid) %><%= object.lot_fid %><% end %></td>

	    </tr>
	  <% end %>
	  </tbody>
	</table>

<% end %>
